# Guide : CrÃ©er et Consommer un CDK en Monorepo (formation avancÃ©e simplifiÃ©e)

Ce document vise Ã  montrer comment construire un **Component Design Kit (CDK)**
dans un monorepo et le rendre utilisable par des Ã©quipes ayant peu de connaissance en React.

---

## ğŸ¯ Objectif
- Fournir un **kit de design (CDK)** simple Ã  consommer : primitives, composants stylÃ©s, thÃ¨mes, icÃ´nes.
- Masquer la complexitÃ© (tokens, state, accessibilitÃ©) derriÃ¨re des **APIs stables et prÃ©visibles**.
- Guider les Ã©quipes via **gÃ©nÃ©rateurs**, **docs vivantes**, **exemples copiables**, et **rÃ¨gles outillÃ©es**.

---

## ğŸ§­ Golden Path
1. **Tokens â†’ ThÃ¨me â†’ Primitives â†’ Composants**
   - Les Ã©quipes consomment surtout `@cdk/components`.
   - Tokens/ThÃ¨me/Headless restent invisibles pour les dÃ©butants.

2. **API simple et stable**
   - Props communes : `className?`, `style?`, `disabled?`, `size?`, `variant?`.
   - Valeurs par dÃ©faut sensÃ©es, noms cohÃ©rents.

3. **Docs vivantes (Storybook)**
   - Exemple minimal + exemple rÃ©aliste (copier-coller).
   - Controls pour jouer.
   - Section â€œbonnes pratiquesâ€ ultra-courte.

4. **GÃ©nÃ©rateurs Plop obligatoires**
   - CrÃ©ation guidÃ©e : composants, hooks, services, tokens, icÃ´nesâ€¦
   - GÃ©nÃ©ration de la story + test + append export automatique.

5. **RÃ¨gles dâ€™imports et garde-fous**
   - ESLint : interdits dâ€™import croisÃ©s (`components` â†’ `tokens`).
   - Interdiction des couleurs brutes (`#fff`) : obligation dâ€™utiliser un token.
   - Interdiction de CSS ad-hoc si un composant CDK existe.

---

## ğŸ—‚ï¸ Architecture accessible

- `@cdk/tokens` : JSON + TS (rarement modifiÃ© par les Ã©quipes).  
- `@cdk/theme` : expose `ThemeProvider` + CSS vars.  
- `@cdk/primitives` : atoms (`Box`, `Stack`, `Text`, `Icon`, `Portal`).  
- `@cdk/headless` : logique sans UI (hooks/services).  
- `@cdk/components` : **API principale** pour les Ã©quipes.  
- `@cdk/icons` : set minimal dâ€™icÃ´nes.  
- `@cdk/presets` : thÃ¨mes prÃªts Ã  lâ€™emploi.  
- `@cdk/lab` : zone dâ€™expÃ©rimentation (RichText, Chartsâ€¦).  

> Pour les utilisateurs finaux : importer uniquement depuis `@cdk/components`.  
> Pour les mainteneurs CDK : couches bas-niveau disponibles pour lâ€™Ã©volution.

---

## ğŸ§° ExpÃ©rience Dev (DX)
- **Storybook** comme page dâ€™accueil du CDK.  
- **Snippets VSCode** (`cdk-btn`, `cdk-card`, â€¦).  
- **Plop** comme gÃ©nÃ©rateur central.  
- **Prettier/ESLint** pour normaliser.  
- **Tests minimaux** : snapshot tokens, smoke tests composants.

---

## ğŸ§ª Tests
- **Headless** : unitaires (logique pure).  
- **Components** : rendu minimal + accessibilitÃ© (axe).  
- **Tokens/ThÃ¨me** : snapshots JSON / mapping CSS vars.

---

## ğŸ‘©â€ğŸ« Formation (3 modules)
### M1 â€” Consommer le CDK
- Notions â€œjuste ce quâ€™il fautâ€ (tokens â†’ theme â†’ components).  
- DÃ©couverte Storybook.  
- Exercice : Ã©cran simple avec 3 composants (Button, Card, Stack).

### M2 â€” Ã‰tendre
- Ajouter un **token** via `plop cdk`.  
- CrÃ©er une **icÃ´ne**.  
- CrÃ©er un **composant lÃ©ger** avec `import * as Primitives`.

### M3 â€” Mainteneurs (avancÃ©)
- Ajouter une **primitive** + mapping thÃ¨me.  
- CrÃ©er un **hook/service headless** et lâ€™habiller en composant.  
- Garde-fous ESLint (tokens only, imports interdits).

---

## âœ… CritÃ¨res de succÃ¨s
- 90% des Ã©quipes utilisent **uniquement `@cdk/components`**.  
- < 15 min pour crÃ©er un Ã©cran standard.  
- < 5 min pour ajouter un token.  
- 0 â€œcouleur bruteâ€ (hex/rgb) dÃ©tectÃ©e par lâ€™ESLint rule `use-token`.

---

## ğŸ“ Prochaines Ã©tapes
1. Activer **Storybook** dans `@cdk/components` et y ajouter 5 composants de base (Button, Card, Input, Stack, Text).  
2. Brancher `ThemeProvider` dans chaque app.  
3. Rendre obligatoires les **gÃ©nÃ©rateurs Plop** (doc + CI).  
4. Ajouter **3 rÃ¨gles ESLint** :  
   - pas de couleur brute,  
   - imports cloisonnÃ©s,  
   - export uniquement via `index.ts`.  
5. Ajouter une page â€œ**DÃ©marrer en 10 minutes**â€ (doc + exemples copiables).

---
