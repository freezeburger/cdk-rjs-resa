# ðŸ”„ Workflow du CDK React Monorepo

## 1. Monorepo & outils
- **pnpm workspaces** : un seul `node_modules` partagÃ©, chaque `package/*` a son `package.json`.
- **turbo** : orchestre les commandes (`build`, `dev`, `test`) avec cache intelligent.
- **tsup** : build TypeScript â†’ ESM + CJS + types `.d.ts`.
- **vitest** : tests unitaires et accessibilitÃ©.
- **vite** : playground pour tester les composants.

> Le repo agit comme une **boÃ®te Ã  Lego** : chaque package = une brique, orchestrÃ©e par turbo.

---

## 2. Cycle dÃ©veloppeur
1. **CrÃ©er/Ã©diter un composant** dans `packages/components/src/ui/â€¦`  
   â†’ utilise les primitives (`Box`, `Stack`) et les hooks headless (`useDisclosure`).  
   â†’ styles via tokens & CSS variables.  

2. **ThÃ©matisation**  
   - Les valeurs visuelles viennent du `ThemeProvider` (`@cdk/theme`).  
   - Changer `accent`, `radius` ou `density` â†’ tous les composants sâ€™adaptent.  

3. **Exemple & sandbox**  
   - Lancer `pnpm dev` â†’ dÃ©marre **apps/playground**.  
   - Importer ton composant pour le tester en live (hot reload).  

4. **Tests**  
   - `pnpm test` â†’ lance Vitest.  
   - A11y avec `@testing-library/react` + `axe-core`.  
   - Objectif : valider lâ€™API (props) + le rendu accessible.  

5. **Build**  
   - `pnpm build` ou `pnpm -w build`.  
   - Chaque package sort son **dist/** avec ESM + CJS + types.  

---

## 3. Flux dâ€™utilisation
- **Design tokens** (`@cdk/tokens`) = fondations neutres.  
- **ThemeProvider** (`@cdk/theme`) expose les tokens en CSS vars.  
- **Primitives** (`@cdk/primitives`) â†’ structure/layout.  
- **Hooks headless** (`@cdk/headless`) â†’ comportements.  
- **IcÃ´nes** (`@cdk/icons`) â†’ SVG minimalistes.  
- **Composants stylÃ©s** (`@cdk/components`) â†’ assemblage.  
- **Presets** (`@cdk/presets`) â†’ thÃ¨mes prÃªts Ã  lâ€™emploi.  
- **Playground** â†’ test visuel et fonctionnel.  

---

## 4. Workflow collaboratif
- **Nouveau composant** â†’ `packages/components/src/ui/NewComponent.tsx`.  
- **Nouveau hook** â†’ `packages/headless/src/useSomething.ts`.  
- **Nouveaux tokens** â†’ `packages/tokens/tokens.json`.  
- **Nouveau preset** â†’ `packages/presets/src/index.ts`.  

Chaque PR â†’ `build` + `test` auto via turbo (avec cache).

---

## RÃ©sumÃ©
- **Monorepo** = cohÃ©rence et partage.  
- **ChaÃ®ne de valeur** : Tokens â†’ Theme â†’ Primitives â†’ Headless â†’ Components â†’ Presets â†’ Playground.  
- **Dev loop rapide** : coder â†’ voir en playground â†’ tester â†’ builder.  
