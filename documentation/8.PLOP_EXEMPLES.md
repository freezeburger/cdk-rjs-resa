# Exemples d’utilisation des générateurs Plop

Ce document illustre les trois branches disponibles via le générateur `entry-advanced`
et le générateur spécialisé `cdk`.

---

## 1) 📦 Package existant (@cdk/*)

### Commande
```bash
pnpm plop cdk
```

### Exemple : ajout d’un token
```
? Package @cdk ciblé :  ▸ @cdk/tokens
? Nom du TOKEN (kebab/camel) :  color-primary
```

### Résultat
- Vérification de l’unicité dans `packages/tokens/src/tokens.json`
- Ajout de la clé `"color-primary": "REPLACE_ME"`
- Append d’un export dans `packages/tokens/src/index.ts`

```diff
// packages/tokens/src/tokens.json
- {}
+ {
+   "color-primary": "REPLACE_ME"
+ }

// packages/tokens/src/index.ts
+ export const COLOR_PRIMARY = tokens["color-primary"];
```

---

## 2) 🧩 Application existante

### Commande
```bash
pnpm plop entry-advanced
```

### Exemple : création d’un container avec logique locale
```
? Cible :  ▸ 🧩 Application existante
? Choisir l'application :  apps/dashboard
? Artefact à générer :  ▸ App: Container (Redux + local hook)
? Organisation :  ▸ Co-localisé (src/components/Foo/Foo.tsx)
? Si des fichiers existent :  ▸ Skip
? Lancer Prettier après génération ?  ▸ Yes
? Nom :  User
```

### Résultat
**Fichiers créés**
```
apps/dashboard/
└─ src/
   ├─ container/
   │  ├─ User.container.tsx
   │  └─ useUserLogic.ts
```

**Extrait : User.container.tsx**
```tsx
import React from "react";
import { useSelector, useDispatch } from "react-redux";
import { useUserLogic } from "./useUserLogic";

export default function UserContainer() {
  const dispatch = useDispatch();
  const state = useSelector((s: any) => s);
  const logic = useUserLogic();

  return (
    <section>
      <h2>User Container</h2>
      <pre>{JSON.stringify(state, null, 2)}</pre>
      <button onClick={() => dispatch({ type: "user/ping" })}>Dispatch ping</button>
      <div>local: {JSON.stringify(logic, null, 2)}</div>
    </section>
  );
}
```

---

## 3) 🆕 Nouvelle application

### Commande
```bash
pnpm plop entry-advanced
```

### Exemple
```
? Cible :  ▸ 🆕 Créer une nouvelle application (squelette fourni)
? Nom de la nouvelle application (kebab-case) :  admin-panel
? Lancer Prettier après génération ?  ▸ Yes
```

### Résultat
- Copie le squelette depuis `tools/plop/templates/new-app-skeleton/` (issu de `src.zip`)
- Création du dossier `apps/admin-panel/` avec toute la structure de base (src, vite config, tsconfig, etc.)

```
apps/admin-panel/
├─ src/
├─ tsconfig.json
├─ vite.config.ts
└─ ...
```

---

## Récapitulatif

- **📦 Package existant** → utilisez `pnpm plop cdk` pour cibler @cdk/tokens, @cdk/theme, @cdk/primitives, etc.  
- **🧩 Application existante** → `pnpm plop entry-advanced` puis choisissez l’app. Artefacts : dto, service, hook, page, container, layout.  
- **🆕 Nouvelle application** → `pnpm plop entry-advanced` puis “Nouvelle application”. Copie du squelette `new-app-skeleton/`.

---
