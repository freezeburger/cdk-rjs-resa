# Exemples dâ€™utilisation des gÃ©nÃ©rateurs Plop

Ce document illustre les trois branches disponibles via le gÃ©nÃ©rateur `entry-advanced`
et le gÃ©nÃ©rateur spÃ©cialisÃ© `cdk`.

---

## 1) ğŸ“¦ Package existant (@cdk/*)

### Commande
```bash
pnpm plop cdk
```

### Exemple : ajout dâ€™un token
```
? Package @cdk ciblÃ© :  â–¸ @cdk/tokens
? Nom du TOKEN (kebab/camel) :  color-primary
```

### RÃ©sultat
- VÃ©rification de lâ€™unicitÃ© dans `packages/tokens/src/tokens.json`
- Ajout de la clÃ© `"color-primary": "REPLACE_ME"`
- Append dâ€™un export dans `packages/tokens/src/index.ts`

```diff
// packages/tokens/src/tokens.json
- {}
+ {
+   "color-primary": "REPLACE_ME"
+ }

// packages/tokens/src/index.ts
+ export const COLOR_PRIMARY = tokens["color-primary"];
```

---

## 2) ğŸ§© Application existante

### Commande
```bash
pnpm plop entry-advanced
```

### Exemple : crÃ©ation dâ€™un container avec logique locale
```
? Cible :  â–¸ ğŸ§© Application existante
? Choisir l'application :  apps/dashboard
? Artefact Ã  gÃ©nÃ©rer :  â–¸ App: Container (Redux + local hook)
? Organisation :  â–¸ Co-localisÃ© (src/components/Foo/Foo.tsx)
? Si des fichiers existent :  â–¸ Skip
? Lancer Prettier aprÃ¨s gÃ©nÃ©ration ?  â–¸ Yes
? Nom :  User
```

### RÃ©sultat
**Fichiers crÃ©Ã©s**
```
apps/dashboard/
â””â”€ src/
   â”œâ”€ container/
   â”‚  â”œâ”€ User.container.tsx
   â”‚  â””â”€ useUserLogic.ts
```

**Extrait : User.container.tsx**
```tsx
import React from "react";
import { useSelector, useDispatch } from "react-redux";
import { useUserLogic } from "./useUserLogic";

export default function UserContainer() {
  const dispatch = useDispatch();
  const state = useSelector((s: any) => s);
  const logic = useUserLogic();

  return (
    <section>
      <h2>User Container</h2>
      <pre>{JSON.stringify(state, null, 2)}</pre>
      <button onClick={() => dispatch({ type: "user/ping" })}>Dispatch ping</button>
      <div>local: {JSON.stringify(logic, null, 2)}</div>
    </section>
  );
}
```

---

## 3) ğŸ†• Nouvelle application

### Commande
```bash
pnpm plop entry-advanced
```

### Exemple
```
? Cible :  â–¸ ğŸ†• CrÃ©er une nouvelle application (squelette fourni)
? Nom de la nouvelle application (kebab-case) :  admin-panel
? Lancer Prettier aprÃ¨s gÃ©nÃ©ration ?  â–¸ Yes
```

### RÃ©sultat
- Copie le squelette depuis `tools/plop/templates/new-app-skeleton/` (issu de `src.zip`)
- CrÃ©ation du dossier `apps/admin-panel/` avec toute la structure de base (src, vite config, tsconfig, etc.)

```
apps/admin-panel/
â”œâ”€ src/
â”œâ”€ tsconfig.json
â”œâ”€ vite.config.ts
â””â”€ ...
```

---

## RÃ©capitulatif

- **ğŸ“¦ Package existant** â†’ utilisez `pnpm plop cdk` pour cibler @cdk/tokens, @cdk/theme, @cdk/primitives, etc.  
- **ğŸ§© Application existante** â†’ `pnpm plop entry-advanced` puis choisissez lâ€™app. Artefacts : dto, service, hook, page, container, layout.  
- **ğŸ†• Nouvelle application** â†’ `pnpm plop entry-advanced` puis â€œNouvelle applicationâ€. Copie du squelette `new-app-skeleton/`.

---
